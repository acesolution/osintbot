{% load static %}
<script src="https://d3js.org/d3.v7.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/d3-org-chart@3.1.0"></script>
<script src="https://cdn.jsdelivr.net/npm/d3-flextree@2.1.2/build/d3-flextree.js"></script>
<link
  rel="stylesheet"
  href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css"
/>
<link href="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css" rel="stylesheet">
<script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.5.4/dist/umd/popper.min.js"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>

<!-- Vendors styles-->
<link rel="stylesheet" href="vendors/simplebar/css/simplebar.css">
<!-- Main styles for this application-->
<link href="css/style.css" rel="stylesheet">
<!-- We use those styles to show code examples, you should remove them in your application.-->
<link href="css/examples.css" rel="stylesheet">
<script src="js/config.js"></script>
<script src="js/color-modes.js"></script>

<style type="text/css">
  .hide {
    display: none !important;
  }

  .drag-enabled:not(.dragging-active) .node.draggable {
    stroke: grey;
    stroke-width: 3px;
    stroke-dasharray: 2px;
  }

  .drag-enabled.dragging-active .droppable {
    stroke: green;
    stroke-width: 3px;
    stroke-dasharray: 5px;
  }

  .node.dragging {
    stroke-dasharray: 0 !important;
    stroke-width: 0 !important;
  }

  .node.dragging .content-container {
    background-color: #ffffff;
  }
  
  
  .chart-holder {
    width: 100%;
    height: 100%;
    overflow: hidden;
    padding-left: 0;
    padding-right: 0;
    background-color: white;
  }
  /* Customize the navbar height */
    .custom-navbar {
        height: 50px;
        line-height: 50px;
    }

    /* Center align the icons in the navbar */
    .navbar .mx-auto {
        display: flex;
        justify-content: center;
        width: 100%;
    }

    /* Style the profile icon */
    .navbar .ml-auto .nav-link {
        font-size: 1.5rem;
    }

    /* Adjust icon sizes */
    .navbar .nav-link i {
        font-size: 1.25rem;
    }

    /* Remove extra padding from the navbar brand */
    .navbar .navbar-brand {
        margin-right: auto;
        padding-left: 0;
    }
    .btn {
        margin: 3px;
        color: inherit;
        text-transform: uppercase;
        word-wrap: break-word;
        white-space: normal;
        cursor: pointer;
        border: 0;
        border-radius: 0.125rem;
        -webkit-box-shadow: 0 2px 5px 0 rgb(0 0 0 / 16%),
          0 2px 10px 0 rgb(0 0 0 / 12%);
        box-shadow: 0 2px 5px 0 rgb(0 0 0 / 16%), 0 2px 10px 0 rgb(0 0 0 / 12%);
        -webkit-transition: color 0.15s ease-in-out,
          background-color 0.15s ease-in-out, border-color 0.15s ease-in-out,
          -webkit-box-shadow 0.15s ease-in-out;
        transition: color 0.15s ease-in-out, background-color 0.15s ease-in-out,
          border-color 0.15s ease-in-out, -webkit-box-shadow 0.15s ease-in-out;
        transition: color 0.15s ease-in-out, background-color 0.15s ease-in-out,
          border-color 0.15s ease-in-out, box-shadow 0.15s ease-in-out;
        transition: color 0.15s ease-in-out, background-color 0.15s ease-in-out,
          border-color 0.15s ease-in-out, box-shadow 0.15s ease-in-out,
          -webkit-box-shadow 0.15s ease-in-out;
        padding: 0.84rem 2.14rem;
        font-size: 0.81rem;
        display: inline-block;
        font-weight: 400;
        color: #212529;
        text-align: center;
        vertical-align: middle;
        -webkit-user-select: none;
        -moz-user-select: none;
        -ms-user-select: none;
        user-select: none;
        border: 1px solid transparent;
        padding: 0.375rem 0.75rem;
        font-size: 1rem;
        line-height: 1.5;
        border-radius: 0.25rem;
      }

      .btn-action-button {
        text-transform: lowercase;
        font-size: 12px !important;
        border-radius: 7px !important;
        color: black !important;
        padding: 4px 5px !important;
        background-color: white !important;
        z-index: 1500;
      }

      .action-buttons {
        display:none;
        position: absolute;
        top: 70px;
        right: 30px;
        transition: max-height 0.3s ease-out;
      }
      .action-buttons.open {
        display: block;
        transition: max-height 0.5s ease-in;
      }

      .svg-chart-container:before {
        content: '';
        position: absolute;
        left: 0;
        right: 0;
        top: 0;
        bottom: 0;
        background: radial-gradient(circle at center, #04192b 0, #000b0e 100%);
      }
      .svg-chart-container{
        height:100%;
    }

</style>

<script>
  
  let dragNode;
  let dropNode;
  let dragEnabled = false;
  let dragStartX;
  let dragStartY;
  let isDragStarting = false;

  let undoActions = [];
  let redoActions = [];

  // This is the data used - https://github.com/bumbeishvili/sample-data/blob/main/data-oracle.csv
  const data = [
  {
    id: 100,
    parentId: null,
    name: 'Steven',
    position: 'Chief Operating Officer',
    image: 'https://bumbeishvili.github.io/avatars/avatars/portrait12.png',
    
  },
  {
    id: 101,
    parentId: 100,
    name: 'Neena',
    position: 'Administration Vice President',
    image: 'https://bumbeishvili.github.io/avatars/avatars/portrait85.png',
    
  },
  {
    id: 102,
    parentId: 100,
    name: 'Lex',
    position: 'Administration Vice President',
    image: 'https://bumbeishvili.github.io/avatars/avatars/portrait16.png',
    
  },
  {
    id: 103,
    parentId: 101,
    name: 'Lex',
    position: 'Administration Vice President',
    image: 'https://bumbeishvili.github.io/avatars/avatars/portrait16.png',
    
  },
  ]
  
  let chart;
  document.addEventListener('DOMContentLoaded', function () {
    chart = new d3.OrgChart()
      .nodeHeight((d) => 85 + 25)
      .nodeWidth((d) => 220 + 2)
      .childrenMargin((d) => 50)
      .compactMarginBetween((d) => 35)
      .compactMarginPair((d) => 30)
      .neighbourMargin((a, b) => 20)
      .nodeContent(function (d, i, arr, state) {
        return generateContent(d);
      })
      .nodeEnter(function (node) {
        d3.select(this).call(
          d3
            .drag()
            .filter(function (x, node) {
              return dragEnabled && this.classList.contains('draggable');
            })
            .on('start', function (d, node) {
              onDragStart(this, d, node);
            })
            .on('drag', function (dragEvent, node) {
              onDrag(this, dragEvent);
            })
            .on('end', function (d) {
              onDragEnd(this, d);
            })
        );
      })
      .nodeUpdate(function (d) {
        if (d.id === '102' || d.id === '120' || d.id === '124') {
          d3.select(this).classed('droppable', false);
        } else {
          d3.select(this).classed('droppable', true);
        }
  
        if (d.id === '101') {
          d3.select(this).classed('draggable', false);
        } else {
          d3.select(this).classed('draggable', true);
        }
      })
      .container('.chart-container')
      .data(data)
      .render();
    // Add event listeners to list items after the DOM has loaded
    addDragEventListenersToFilterItems();
    addDropEventListenersToChart();
  });

  function addDragEventListenersToFilterItems() {
    const filterLists = document.querySelectorAll('.elements-list a');
    filterLists.forEach((item) => {
      item.setAttribute('draggable', true); // Make the list items draggable
  
      item.addEventListener('dragstart', function (e) {
        e.dataTransfer.setData('text/plain', e.target.textContent.trim());
        e.dataTransfer.effectAllowed = 'copy';
      });
    });
  }
  
  function addDropEventListenersToChart() {
    const chartContainer = document.querySelector('.chart-container');
    chartContainer.addEventListener('dragover', function (e) {
      e.preventDefault();
      e.dataTransfer.dropEffect = 'copy'; // Indicate the type of operation
    });
  
    chartContainer.addEventListener('drop', function (e) {
      e.preventDefault();
      const nodeName = e.dataTransfer.getData('text/plain');
      if (nodeName) {
        addNodeToChart(nodeName);
      }
    });
  }
  
  function addNodeToChart(nodeName) {
     // Define a map to associate node names with icon classes
    const iconMap = {
        "Email": "https://cdn-icons-png.freepik.com/512/552/552486.png",
        "Phone Number": "https://cdn-icons-png.freepik.com/512/15094/15094539.png",
        "Text": "https://cdn-icons-png.freepik.com/512/16799/16799604.png",
        "Mathematics": "https://cdn-icons-png.freepik.com/512/5199/5199365.png",
        "Easy": "https://cdn-icons-png.freepik.com/512/12366/12366732.png",
        "Medium": "fa fa-adjust",
        "Hard": "https://cdn-icons-png.freepik.com/512/9750/9750980.png"
    };

    // Get the appropriate icon class based on the node name
    const iconClass = iconMap[nodeName] || "fa fa-question"; // Default to a question mark icon if no match is found
    console.log(iconClass);
    const newNode = {
      id: Math.random().toString(36).substr(2, 9),
      name: nodeName,
      position: "Newly Added",  // Customize this
      parentId: '100',  // Replace with actual parent ID or logic
      image: iconClass,
    };
  
    // Update chart data
    const data = chart.getChartState().data;
    data.push(newNode);
  
    // Re-render the chart
    chart.data(data).render();
  }
  

  function onDragStart(element, dragEvent, node) {
    dragNode = node;
    const width = dragEvent.subject.width;
    const half = width / 2;
    const x = dragEvent.x - half;
    dragStartX = x;
    dragStartY = parseFloat(dragEvent.y);
    isDragStarting = true;

    d3.select(element).classed('dragging', true);
  }

  function onDrag(element, dragEvent) {
    if (!dragNode) {
      return;
    }

    const state = chart.getChartState();
    const g = d3.select(element);

    // This condition is designed to run at the start of a drag only
    if (isDragStarting) {
      isDragStarting = false;
      document
        .querySelector('.chart-container')
        .classList.add('dragging-active');

      // This sets the Z-Index above all other nodes, by moving the dragged node to be the last-child.
      g.raise();

      const descendants = dragEvent.subject.descendants();
      const linksToRemove = [...(descendants || []), dragEvent.subject];
      const nodesToRemove = descendants.filter(
        (x) => x.data.id !== dragEvent.subject.id
      );

      // Remove all links associated with the dragging node
      state['linksWrapper']
        .selectAll('path.link')
        .data(linksToRemove, (d) => state.nodeId(d))
        .remove();

      // Remove all descendant nodes associated with the dragging node
      if (nodesToRemove) {
        state['nodesWrapper']
          .selectAll('g.node')
          .data(nodesToRemove, (d) => state.nodeId(d))
          .remove();
      }
    }

    dropNode = null;
    const cP = {
      width: dragEvent.subject.width,
      height: dragEvent.subject.height,
      left: dragEvent.x,
      right: dragEvent.x + dragEvent.subject.width,
      top: dragEvent.y,
      bottom: dragEvent.y + dragEvent.subject.height,
      midX: dragEvent.x + dragEvent.subject.width / 2,
      midY: dragEvent.y + dragEvent.subject.height / 2,
    };

    // eslint-disable-next-line @typescript-eslint/no-this-alias
    const allNodes = d3.selectAll('g.node:not(.dragging)');
    allNodes.select('rect').attr('fill', 'none');

    allNodes
      .filter(function (d2, i) {
        const cPInner = {
          left: d2.x,
          right: d2.x + d2.width,
          top: d2.y,
          bottom: d2.y + d2.height,
        };

        if (
          cP.midX > cPInner.left &&
          cP.midX < cPInner.right &&
          cP.midY > cPInner.top &&
          cP.midY < cPInner.bottom &&
          this.classList.contains('droppable')
        ) {
          dropNode = d2;
          return d2;
        }
      })
      .select('rect')
      .attr('fill', '#e4e1e1');

    dragStartX += parseFloat(dragEvent.dx);
    dragStartY += parseFloat(dragEvent.dy);
    g.attr('transform', 'translate(' + dragStartX + ',' + dragStartY + ')');
  }

  function onDragEnd(element, dragEvent) {
    document
      .querySelector('.chart-container')
      .classList.remove('dragging-active');

    if (!dragNode) {
      return;
    }

    d3.select(element).classed('dragging', false);

    if (!dropNode) {
      chart.render();
      return;
    }

    if (dragEvent.subject.parent.id === dropNode.id) {
      chart.render();
      return;
    }

    d3.select(element).remove();

    const data = chart.getChartState().data;
    console.log(data);
    console.log(dragEvent.subject.id);
    let node = null;
    data?.forEach((x, index) => {
        console.log(typeof(dragEvent.subject.id));
        console.log(typeof(x.id));
        if (String(x.id) === String(dragEvent.subject.id)) {  // Convert dragEvent.subject.id to a number
            node = x; // Assign the matching node to the variable
            console.log("success");
            return;
        }
    });
    console.log(node);
    const oldParentId = node.parentId;
    node.parentId = dropNode.id;

    redoActions = [];
    undoActions.push({
      id: dragEvent.subject.id,
      parentId: oldParentId,
    });

    dropNode = null;
    dragNode = null;
    chart.render();
    updateDragActions();
  }

  function enableDrag() {
    dragEnabled = true;
    document.querySelector('.chart-container').classList.add('drag-enabled');
    document.getElementById('enableDragButton').classList.add('hide');
    document.getElementById('dragActions').classList.remove('hide');
  }

  function disableDrag() {
    dragEnabled = false;
    document.querySelector('.chart-container').classList.remove('drag-enabled');
    document.getElementById('enableDragButton').classList.remove('hide');
    document.getElementById('dragActions').classList.add('hide');
    undoActions = [];
    redoActions = [];
    updateDragActions();
  }

  function cancelDrag() {
    if (undoActions.length === 0) {
      disableDrag();
      return;
    }

    const data = chart.getChartState().data;
    undoActions.reverse().forEach((action) => {
      const node = data.find((x) => String(x.id) === String(action.id));
      node.parentId = action.parentId;
    });

    disableDrag();
    chart.render();
  }

  function undo() {
    const action = undoActions.pop();
    if (action) {
      const node = chart.getChartState().data.find((x) => String(x.id) === String(action.id));
      const currentParentId = node.parentId;
      const previousParentId = action.parentId;
      action.parentId = currentParentId;
      node.parentId = previousParentId;

      redoActions.push(action);
      chart.render();
      updateDragActions();
    }
  }

  function redo() {
    const action = redoActions.pop();
    if (action) {
      const node = chart.getChartState().data.find((x) => String(x.id) === String(action.id));
      const currentParentId = node.parentId;
      const previousParentId = action.parentId;
      action.parentId = currentParentId;
      node.parentId = previousParentId;
      undoActions.push(action);
      chart.render();
      updateDragActions();
    }
  }

  function updateDragActions() {
    if (undoActions.length > 0) {
      const undoButton = document.getElementById('undoButton');
      undoButton.disabled = false;
    } else {
      undoButton.disabled = true;
    }

    if (redoActions.length > 0) {
      const redoButton = document.getElementById('redoButton');
      redoButton.disabled = false;
    } else {
      redoButton.disabled = true;
    }
  }

  function generateContent(d) {
    const color = '#FFFFFF';
    const imageDiffVert = 25 + 2;

   

    return `
      <div class="node-container" style='
      width:${d.width}px;
      height:${d.height}px;
      padding-top:${imageDiffVert - 2}px;
      padding-left:1px;
      padding-right:1px'>
              <div class="content-container" style="font-family: 'Inter', sans-serif;  margin-left:-1px;width:${
                d.width - 2
              }px;height:${
      d.height - imageDiffVert
    }px;border-radius:10px;border: ${
      d.data._highlighted || d.data._upToTheRootHighlighted
        ? '5px solid #E27396"'
        : '1px solid #E4E2E9"'
    } >
                  <div style="display:flex;justify-content:flex-end;margin-top:5px;margin-right:8px">#${
                    d.data.id
                  }</div>
                  <div  style="margin-top:${
                    -imageDiffVert - 20
                  }px;margin-left:${15}px;border-radius:100px;width:50px;height:50px;" ></div>
                  <div style="margin-top:${
                    -imageDiffVert - 20
                  }px;">   <img src=" ${
      d.data.image
    }" style="margin-left:${20}px;border-radius:100px;width:40px;height:40px;" /></div>
                  <div style="font-size:15px;color:#08011E;margin-left:20px;margin-top:10px">  ${
                    d.data.name
                  } </div>
                  <div style="color:#716E7B;margin-left:20px;margin-top:3px;font-size:10px;"> ${
                    d.data.position
                  } </div>

              </div>
          </div>
      `;
  }
</script>



<!--
  This is the code which is used to show of feature , other parts of the code are part of the boilerplate

-->
<div class="sidebar sidebar-fixed border-end" id="sidebar">
    <div class="sidebar-header border-bottom">
    <div class="sidebar-brand">
        <svg class="sidebar-brand-full" width="110" height="32" alt="CoreUI Logo">
        <use xlink:href="assets/brand/coreui.svg#full"></use>
        </svg>
        <svg class="sidebar-brand-narrow" width="32" height="32" alt="CoreUI Logo">
        <use xlink:href="assets/brand/coreui.svg#signet"></use>
        </svg>
    </div>
    <button class="btn-close d-lg-none" type="button" aria-label="Close" onclick="coreui.Sidebar.getInstance(document.querySelector(&quot;#sidebar&quot;)).toggle()"></button>
    </div>
    <ul class="sidebar-nav" data-coreui="navigation" data-simplebar="">
        <li class="nav-item"><a class="nav-link" href="index.html">
            <svg class="nav-icon">
                <use xlink:href="vendors/@coreui/icons/svg/free.svg#cil-speedometer"></use>
            </svg><span data-coreui-i18n="dashboard">Dashboard</span></a></li>
        <li class="nav-title" data-coreui-i18n="theme">Theme</li>
        <li class="nav-item"><a class="nav-link" href="colors.html">
            <svg class="nav-icon">
                <use xlink:href="vendors/@coreui/icons/svg/free.svg#cil-drop"></use>
            </svg><span data-coreui-i18n="colors">Colors</span></a></li>
        <li class="nav-item"><a class="nav-link" href="typography.html">
            <svg class="nav-icon">
                <use xlink:href="vendors/@coreui/icons/svg/free.svg#cil-pencil"></use>
            </svg><span data-coreui-i18n="typography"> Typography</span></a></li>
        <li class="nav-title" data-coreui-i18n="components">Components</li>
        <li class="nav-group"><a class="nav-link nav-group-toggle" href="#">
            <svg class="nav-icon">
                <use xlink:href="vendors/@coreui/icons/svg/free.svg#cil-puzzle"></use>
            </svg><span data-coreui-i18n="base">Base</span></a>
            <ul class="nav-group-items compact">
            <li class="nav-item"><a class="nav-link" href="base/accordion.html"><span class="nav-icon"><span class="nav-icon-bullet"></span></span><span data-coreui-i18n="accordion">Accordion</span></a></li>
            <li class="nav-item"><a class="nav-link" href="base/breadcrumb.html"><span class="nav-icon"><span class="nav-icon-bullet"></span></span> Breadcrumb</a></li>
            <li class="nav-item"><a class="nav-link" href="base/cards.html"><span class="nav-icon"><span class="nav-icon-bullet"></span></span> Cards</a></li>
            <li class="nav-item"><a class="nav-link" href="base/carousel.html"><span class="nav-icon"><span class="nav-icon-bullet"></span></span> Carousel</a></li>
            <li class="nav-item"><a class="nav-link" href="base/collapse.html"><span class="nav-icon"><span class="nav-icon-bullet"></span></span> Collapse</a></li>
            <li class="nav-item"><a class="nav-link" href="base/list-group.html"><span class="nav-icon"><span class="nav-icon-bullet"></span></span> List group</a></li>
            <li class="nav-item"><a class="nav-link" href="base/navs-tabs.html"><span class="nav-icon"><span class="nav-icon-bullet"></span></span> Navs &amp; Tabs</a></li>
            <li class="nav-item"><a class="nav-link" href="base/pagination.html"><span class="nav-icon"><span class="nav-icon-bullet"></span></span> Pagination</a></li>
            <li class="nav-item"><a class="nav-link" href="base/placeholders.html"><span class="nav-icon"><span class="nav-icon-bullet"></span></span> Placeholders</a></li>
            <li class="nav-item"><a class="nav-link" href="base/popovers.html"><span class="nav-icon"><span class="nav-icon-bullet"></span></span> Popovers</a></li>
            <li class="nav-item"><a class="nav-link" href="base/progress.html"><span class="nav-icon"><span class="nav-icon-bullet"></span></span> Progress</a></li>
            <li class="nav-item"><a class="nav-link" href="base/spinners.html"><span class="nav-icon"><span class="nav-icon-bullet"></span></span> Spinners</a></li>
            <li class="nav-item"><a class="nav-link" href="base/tables.html"><span class="nav-icon"><span class="nav-icon-bullet"></span></span> Tables</a></li>
            <li class="nav-item"><a class="nav-link" href="base/tooltips.html"><span class="nav-icon"><span class="nav-icon-bullet"></span></span> Tooltips</a></li>
            </ul>
        </li>
        <li class="nav-group"><a class="nav-link nav-group-toggle" href="#">
            <svg class="nav-icon">
                <use xlink:href="vendors/@coreui/icons/svg/free.svg#cil-cursor"></use>
            </svg><span data-coreui-i18n="buttons">Buttons</span></a>
            <ul class="nav-group-items compact">
            <li class="nav-item"><a class="nav-link" href="buttons/buttons.html"><span class="nav-icon"><span class="nav-icon-bullet"></span></span> Buttons</a></li>
            <li class="nav-item"><a class="nav-link" href="buttons/button-group.html"><span class="nav-icon"><span class="nav-icon-bullet"></span></span> Buttons Group</a></li>
            <li class="nav-item"><a class="nav-link" href="buttons/loading-buttons.html"><span class="nav-icon"><span class="nav-icon-bullet"></span></span> Loading Buttons<span class="badge bg-danger-gradient ms-auto">PRO</span></a></li>
            <li class="nav-item"><a class="nav-link" href="buttons/dropdowns.html"><span class="nav-icon"><span class="nav-icon-bullet"></span></span> Dropdowns</a></li>
            </ul>
        </li>
        <li class="nav-group"><a class="nav-link nav-group-toggle" href="#">
            <svg class="nav-icon">
                <use xlink:href="{% static 'vendors/@coreui/icons/svg/free.svg' %}#cil-notes"></use>
                </svg><span data-coreui-i18n="forms">Forms</span></a>
            <ul class="nav-group-items compact">
            <li class="nav-item"><a class="nav-link" href="forms/form-control.html"><span class="nav-icon"><span class="nav-icon-bullet"></span></span> Form Control</a></li>
            <li class="nav-item"><a class="nav-link" href="forms/select.html"><span class="nav-icon"><span class="nav-icon-bullet"></span></span> Select</a></li>
            <li class="nav-item"><a class="nav-link" href="forms/multi-select.html"><span class="nav-icon"><span class="nav-icon-bullet"></span></span> Multi Select<span class="badge bg-danger-gradient ms-auto">PRO</span></a></li>
            <li class="nav-item"><a class="nav-link" href="forms/checks-radios.html"><span class="nav-icon"><span class="nav-icon-bullet"></span></span> Checks &amp; radios</a></li>
            <li class="nav-item"><a class="nav-link" href="forms/range.html"><span class="nav-icon"><span class="nav-icon-bullet"></span></span> Range</a></li>
            <li class="nav-item"><a class="nav-link" href="forms/input-group.html"><span class="nav-icon"><span class="nav-icon-bullet"></span></span> Input group</a></li>
            <li class="nav-item"><a class="nav-link" href="forms/floating-labels.html"><span class="nav-icon"><span class="nav-icon-bullet"></span></span> Floating labels</a></li>
            <li class="nav-item"><a class="nav-link" href="forms/date-picker.html"><span class="nav-icon"><span class="nav-icon-bullet"></span></span> Date Picker<span class="badge bg-danger-gradient ms-auto">PRO</span></a></li>
            <li class="nav-item"><a class="nav-link" href="forms/date-range-picker.html"><span class="nav-icon"><span class="nav-icon-bullet"></span></span> Date Range Picker<span class="badge bg-danger-gradient ms-auto">PRO</span></a></li>
            <li class="nav-item"><a class="nav-link" href="forms/time-picker.html"><span class="nav-icon"><span class="nav-icon-bullet"></span></span> Time Picker<span class="badge bg-danger-gradient ms-auto">PRO</span></a></li>
            <li class="nav-item"><a class="nav-link" href="forms/layout.html"><span class="nav-icon"><span class="nav-icon-bullet"></span></span><span data-coreui-i18n="layout">Layout</span></a></li>
            <li class="nav-item"><a class="nav-link" href="forms/validation.html"><span class="nav-icon"><span class="nav-icon-bullet"></span></span><span data-coreui-i18n="validation">Validation</span></a></li>
            </ul>
        </li>
        <li class="nav-group"><a class="nav-link nav-group-toggle" href="#">
            <svg class="nav-icon">
                <use xlink:href="vendors/@coreui/icons/svg/free.svg#cil-star"></use>
            </svg><span data-coreui-i18n="icons">Icons</span></a>
            <ul class="nav-group-items compact">
            <li class="nav-item"><a class="nav-link" href="icons/coreui-icons-free.html"><span class="nav-icon"><span class="nav-icon-bullet"></span></span> CoreUI Icons<span class="badge bg-success ms-auto" data-coreui-i18n="free">Free</span></a></li>
            <li class="nav-item"><a class="nav-link" href="icons/coreui-icons-brand.html"><span class="nav-icon"><span class="nav-icon-bullet"></span></span> CoreUI Icons - Brand</a></li>
            <li class="nav-item"><a class="nav-link" href="icons/coreui-icons-flag.html"><span class="nav-icon"><span class="nav-icon-bullet"></span></span> CoreUI Icons - Flag</a></li>
            </ul>
        </li>
        <li class="nav-group"><a class="nav-link nav-group-toggle" href="#">
            <svg class="nav-icon">
                <use xlink:href="vendors/@coreui/icons/svg/free.svg#cil-bell"></use>
            </svg><span data-coreui-i18n="notifications">Notifications</span></a>
            <ul class="nav-group-items compact">
            <li class="nav-item"><a class="nav-link" href="notifications/alerts.html"><span class="nav-icon"><span class="nav-icon-bullet"></span></span> Alerts</a></li>
            <li class="nav-item"><a class="nav-link" href="notifications/badge.html"><span class="nav-icon"><span class="nav-icon-bullet"></span></span> Badge</a></li>
            <li class="nav-item"><a class="nav-link" href="notifications/modals.html"><span class="nav-icon"><span class="nav-icon-bullet"></span></span> Modals</a></li>
            <li class="nav-item"><a class="nav-link" href="notifications/toasts.html"><span class="nav-icon"><span class="nav-icon-bullet"></span></span> Toasts</a></li>
            </ul>
        </li>
        <li class="nav-item"><a class="nav-link" href="widgets.html">
            <svg class="nav-icon">
                <use xlink:href="vendors/@coreui/icons/svg/free.svg#cil-calculator"></use>
            </svg><span data-coreui-i18n="widgets">Widgets</span><span class="badge bg-info-gradient text-uppercase ms-auto" data-coreui-i18n="new">New</span></a></li>
        <li class="nav-divider"></li>
        <li class="nav-title" data-coreui-i18n="plugins">
            Plugins</li>
        <li class="nav-item"><a class="nav-link" href="calendar.html">
            <svg class="nav-icon">
                <use xlink:href="vendors/@coreui/icons/svg/free.svg#cil-calendar"></use>
            </svg><span data-coreui-i18n="calendar">Calendar</span><span class="badge bg-danger-gradient ms-auto">PRO</span></a></li>
        <li class="nav-item"><a class="nav-link" href="charts.html">
            <svg class="nav-icon">
                <use xlink:href="vendors/@coreui/icons/svg/free.svg#cil-chart-pie"></use>
            </svg><span data-coreui-i18n="charts">Charts</span></a></li>
        <li class="nav-item"><a class="nav-link" href="datatables.html">
            <svg class="nav-icon">
                <use xlink:href="vendors/@coreui/icons/svg/free.svg#cil-spreadsheet"></use>
            </svg> DataTables<span class="badge bg-danger-gradient ms-auto">PRO</span></a></li>
        <li class="nav-item"><a class="nav-link" href="google-maps.html">
            <svg class="nav-icon">
                <use xlink:href="vendors/@coreui/icons/svg/free.svg#cil-map"></use>
            </svg> Google Maps<span class="badge bg-danger-gradient ms-auto">PRO</span></a></li>
        <li class="nav-title" data-coreui-i18n="extras">
            Extras</li>
        <li class="nav-group"><a class="nav-link nav-group-toggle" href="#">
            <svg class="nav-icon">
                <use xlink:href="vendors/@coreui/icons/svg/free.svg#cil-star"></use>
            </svg><span data-coreui-i18n="pages">Pages</span></a>
            <ul class="nav-group-items compact">
            <li class="nav-item"><a class="nav-link" href="login.html" target="_top">
                <svg class="nav-icon">
                    <use xlink:href="vendors/@coreui/icons/svg/free.svg#cil-account-logout"></use>
                </svg><span data-coreui-i18n="login">Login</span></a></li>
            <li class="nav-item"><a class="nav-link" href="register.html" target="_top">
                <svg class="nav-icon">
                    <use xlink:href="vendors/@coreui/icons/svg/free.svg#cil-account-logout"></use>
                </svg><span data-coreui-i18n="register">Register</span></a></li>
            <li class="nav-item"><a class="nav-link" href="404.html" target="_top">
                <svg class="nav-icon">
                    <use xlink:href="vendors/@coreui/icons/svg/free.svg#cil-bug"></use>
                </svg><span data-coreui-i18n="error404">Error 404</span></a></li>
            <li class="nav-item"><a class="nav-link" href="500.html" target="_top">
                <svg class="nav-icon">
                    <use xlink:href="vendors/@coreui/icons/svg/free.svg#cil-bug"></use>
                </svg><span data-coreui-i18n="error500">Error 500</span></a></li>
            </ul>
        </li>
        <li class="nav-group"><a class="nav-link nav-group-toggle" href="#">
            <svg class="nav-icon">
                <use xlink:href="vendors/@coreui/icons/svg/free.svg#cil-layers"></use>
            </svg><span data-coreui-i18n="apps">Apps</span></a>
            <ul class="nav-group-items compact">
            <li class="nav-group"><a class="nav-link nav-group-toggle" href="#">
                <svg class="nav-icon">
                    <use xlink:href="vendors/@coreui/icons/svg/free.svg#cil-description"></use>
                </svg> Invoicing</a>
                <ul class="nav-group-items compact">
                <li class="nav-item"><a class="nav-link" href="apps/invoicing/invoice.html"><span class="nav-icon"><span class="nav-icon-bullet"></span></span> Invoice<span class="badge bg-danger-gradient ms-auto">PRO</span></a></li>
                </ul>
            </li>
            <li class="nav-group"><a class="nav-link nav-group-toggle" href="#">
                <svg class="nav-icon">
                    <use xlink:href="vendors/@coreui/icons/svg/free.svg#cil-envelope-open"></use>
                </svg> Email</a>
                <ul class="nav-group-items compact">
                <li class="nav-item"><a class="nav-link" href="apps/email/inbox.html"><span class="nav-icon"><span class="nav-icon-bullet"></span></span> Inbox<span class="badge bg-danger-gradient ms-auto">PRO</span></a></li>
                <li class="nav-item"><a class="nav-link" href="apps/email/message.html"><span class="nav-icon"><span class="nav-icon-bullet"></span></span> Message<span class="badge bg-danger-gradient ms-auto">PRO</span></a></li>
                <li class="nav-item"><a class="nav-link" href="apps/email/compose.html"><span class="nav-icon"><span class="nav-icon-bullet"></span></span> Compose<span class="badge bg-danger-gradient ms-auto">PRO</span></a></li>
                </ul>
            </li>
            </ul>
        </li>
        <li class="nav-item mt-auto"><a class="nav-link" href="https://coreui.io/docs/templates/installation/" target="_blank">
            <svg class="nav-icon">
                <use xlink:href="vendors/@coreui/icons/svg/free.svg#cil-description"></use>
            </svg><span data-coreui-i18n="docs">Docs</span></a></li>
        <li class="nav-title"><span data-coreui-i18n="systemUtilization">System Utilization</span></li>
        <li class="nav-item px-3 pb-2 d-narrow-none">
            <div class="text-uppercase small fw-bold mb-1" data-coreui-i18n="cpuUsage">CPU Usage</div>
            <div class="progress progress-thin">
            <div class="progress-bar bg-info-gradient" role="progressbar" style="width: 25%" aria-valuenow="25" aria-valuemin="0" aria-valuemax="100"></div>
            </div>
            <div class="small text-body-secondary" data-coreui-i18n="cpuUsageDescription, { 'number_of_processes': 358, 'number_of_cores': '1/4' }">348 Processes. 1/4 Cores.</div>
        </li>
        <li class="nav-item px-3 pb-2 d-narrow-none">
            <div class="text-uppercase small fw-bold mb-1" data-coreui-i18n="memoryUsage">Memory Usage</div>
            <div class="progress progress-thin">
            <div class="progress-bar bg-warning-gradient" role="progressbar" style="width: 70%" aria-valuenow="70" aria-valuemin="0" aria-valuemax="100"></div>
            </div>
            <div class="small text-body-secondary">11444MB/16384MB</div>
        </li>
        <li class="nav-item px-3 pb-2 mb-3 d-narrow-none">
            <div class="text-uppercase small fw-bold mb-1" data-coreui-i18n="ssdUsage">SSD Usage</div>
            <div class="progress progress-thin">
            <div class="progress-bar bg-danger-gradient" role="progressbar" style="width: 95%" aria-valuenow="95" aria-valuemin="0" aria-valuemax="100"></div>
            </div>
            <div class="small text-body-secondary">243GB/256GB</div>
        </li>
    </ul>
    <div class="sidebar-footer border-top d-none d-lg-flex">
    <button class="sidebar-toggler" type="button" data-coreui-toggle="unfoldable"></button>
    </div>
</div>


  
<div class="wrapper d-flex flex-column min-vh-100" style="height:100%;">
    <header class="header header-sticky p-0">
        <div class="container-fluid px-4 border-bottom">
            <button class="header-toggler" type="button"  style="margin-inline-start: -14px">
            <svg class="icon icon-lg">
                <use xlink:href="vendors/@coreui/icons/svg/free.svg#cil-menu"></use>
            </svg>
            </button>
            <ul class="header-nav ms-auto ms-md-0">
                  <li class="nav-item">
                    <div class="chart-holder">
                      <button class="btn btn-link nav-link" id="enableDragButton" onclick="enableDrag()" title="Organize">
                        <img src="https://cdn-icons-png.flaticon.com/512/10348/10348649.png" alt="Icon" style="width: 21px; height: 20px;">
                      </button>
                      <div id="dragActions" class="hide">
                      <button class="btn btn-link nav-link" id="finishDrag" onclick="disableDrag()"  title="Done">
                        <img src="https://cdn-icons-png.flaticon.com/512/17191/17191570.png" alt="Icon" style="width: 21px; height: 20px;">
                      </button>
                      <button class="btn btn-link nav-link" id="undoButton" disabled onclick="undo()" title="Undo">
                        <img src="https://cdn-icons-png.flaticon.com/512/3894/3894564.png" alt="Icon" style="width: 21px; height: 20px;">
                      </button>
                      <button class="btn btn-link nav-link" id="redoButton" disabled onclick="redo()" title="Redo">
                        <img src="https://cdn-icons-png.flaticon.com/512/3894/3894560.png" alt="Icon" style="width: 21px; height: 20px;">
                      </button>
                      <button class="btn btn-link nav-link" id="cancelDrag" onclick="cancelDrag()" title="Cancel">
                        <img src="https://cdn-icons-png.flaticon.com/512/17330/17330259.png" alt="Icon" style="width: 21px; height: 20px;">
                      </button>
                    </div>
                    <! -- <button class="btn btn-link nav-link" type="button" aria-expanded="false" data-coreui-toggle="dropdown">
                      <img src="https://cdn-icons-png.flaticon.com/512/10348/10348649.png" alt="Icon" style="width: 24px; height: 24px;">
                    </button> -->
                  
                </li>
                <li class="nav-item py-1">
                    <div class="vr h-100 mx-2 text-body text-opacity-75"></div>
                </li>
                <li class="nav-item dropdown">
                    <button class="btn btn-link nav-link" type="button" aria-expanded="false" data-coreui-toggle="dropdown">
                    <svg class="icon icon-lg">
                        <use xlink:href="vendors/@coreui/icons/svg/free.svg#cil-language"></use>
                    </svg>
                    </button>
                    <ul class="dropdown-menu dropdown-menu-end" style="--cui-dropdown-min-width: 8rem;">
                    <li>
                        <button class="dropdown-item d-flex align-items-center" type="button" data-coreui-language-value="en" onclick="i18next.changeLanguage(&quot;en&quot;)">
                        <svg class="icon icon-lg me-3">
                            <use xlink:href="vendors/@coreui/icons/svg/flag.svg#cif-gb"></use>
                        </svg>English
                        </button>
                    </li>
                    <li>
                        <button class="dropdown-item d-flex align-items-center" type="button" data-coreui-language-value="es" onclick="i18next.changeLanguage(&quot;es&quot;)">
                        <svg class="icon icon-lg me-3">
                            <use xlink:href="vendors/@coreui/icons/svg/flag.svg#cif-es"></use>
                        </svg>Espa√±ol
                        </button>
                    </li>
                    <li>
                        <button class="dropdown-item d-flex align-items-center" type="button" data-coreui-language-value="pl" onclick="i18next.changeLanguage(&quot;pl&quot;)">
                        <svg class="icon icon-lg me-3">
                            <use xlink:href="vendors/@coreui/icons/svg/flag.svg#cif-pl"></use>
                        </svg>Polski
                        </button>
                    </li>
                    </ul>
                </li>
                <li class="nav-item dropdown">
                    <button class="btn btn-link nav-link" type="button" aria-expanded="false" data-coreui-toggle="dropdown">
                    <svg class="icon icon-lg theme-icon-active">
                        <use xlink:href="vendors/@coreui/icons/svg/free.svg#cil-contrast"></use>
                    </svg>
                    </button>
                    <ul class="dropdown-menu dropdown-menu-end" style="--cui-dropdown-min-width: 8rem;">
                    <li>
                        <button class="dropdown-item d-flex align-items-center" type="button" data-coreui-theme-value="light">
                        <svg class="icon icon-lg me-3">
                            <use xlink:href="vendors/@coreui/icons/svg/free.svg#cil-sun"></use>
                        </svg><span data-coreui-i18n="light">Light</span>
                        </button>
                    </li>
                    <li>
                        <button class="dropdown-item d-flex align-items-center" type="button" data-coreui-theme-value="dark">
                        <svg class="icon icon-lg me-3">
                            <use xlink:href="vendors/@coreui/icons/svg/free.svg#cil-moon"></use>
                        </svg><span data-coreui-i18n="dark"> Dark</span>
                        </button>
                    </li>
                    <li>
                        <button class="dropdown-item d-flex align-items-center active" type="button" data-coreui-theme-value="auto">
                        <svg class="icon icon-lg me-3">
                            <use xlink:href="vendors/@coreui/icons/svg/free.svg#cil-contrast"></use>
                        </svg>Auto
                        </button>
                    </li>
                    </ul>
                </li>
                <li class="nav-item py-1">
                    <div class="vr h-100 mx-2 text-body text-opacity-75"></div>
                </li>
                <li class="nav-item dropdown"><a class="nav-link py-0" data-coreui-toggle="dropdown" href="#" role="button" aria-haspopup="true" aria-expanded="false">
                    <div class="avatar avatar-md"><img class="avatar-img" src="assets/img/avatars/8.jpg" alt="user@email.com"></div>
                    </a>
                    <div class="dropdown-menu dropdown-menu-end pt-0">
                    <div class="dropdown-header bg-body-tertiary text-body-secondary fw-semibold rounded-top mb-2" data-coreui-i18n="account">Account</div><a class="dropdown-item" href="#">
                        <svg class="icon me-2">
                        <use xlink:href="vendors/@coreui/icons/svg/free.svg#cil-bell"></use>
                        </svg><span data-coreui-i18n="updates">Updates</span><span class="badge badge-sm bg-info-gradient ms-2">42</span></a><a class="dropdown-item" href="#">
                        <svg class="icon me-2">
                        <use xlink:href="vendors/@coreui/icons/svg/free.svg#cil-envelope-open"></use>
                        </svg><span data-coreui-i18n="messages">Messages</span><span class="badge badge-sm badge-sm bg-success ms-2">42</span></a><a class="dropdown-item" href="#">
                        <svg class="icon me-2">
                        <use xlink:href="vendors/@coreui/icons/svg/free.svg#cil-task"></use>
                        </svg><span data-coreui-i18n="tasks">Tasks</span><span class="badge badge-sm bg-danger-gradient ms-2">42</span></a><a class="dropdown-item" href="#">
                        <svg class="icon me-2">
                        <use xlink:href="vendors/@coreui/icons/svg/free.svg#cil-comment-square"></use>
                        </svg><span data-coreui-i18n="comments">Comments</span><span class="badge badge-sm bg-warning-gradient ms-2">42</span></a>
                    <div class="dropdown-header bg-body-tertiary text-body-secondary fw-semibold my-2" data-coreui-i18n="settings">Settings</div><a class="dropdown-item" href="#">
                        <svg class="icon me-2">
                        <use xlink:href="vendors/@coreui/icons/svg/free.svg#cil-user"></use>
                        </svg><span data-coreui-i18n="profile">Profile</span></a><a class="dropdown-item" href="#">
                        <svg class="icon me-2">
                        <use xlink:href="vendors/@coreui/icons/svg/free.svg#cil-settings"></use>
                        </svg><span data-coreui-i18n="settings">Settings</span></a><a class="dropdown-item" href="#">
                        <svg class="icon me-2">
                        <use xlink:href="vendors/@coreui/icons/svg/free.svg#cil-credit-card"></use>
                        </svg><span data-coreui-i18n="payments">Payments</span><span class="badge badge-sm bg-secondary-gradient text-dark ms-2">42</span></a><a class="dropdown-item" href="#">
                        <svg class="icon me-2">
                        <use xlink:href="vendors/@coreui/icons/svg/free.svg#cil-file"></use>
                        </svg><span data-coreui-i18n="projects">Projects</span><span class="badge badge-sm bg-primary-gradient ms-2">42</span></a>
                    <div class="dropdown-divider"></div><a class="dropdown-item" href="#">
                        <svg class="icon me-2">
                        <use xlink:href="vendors/@coreui/icons/svg/free.svg#cil-lock-locked"></use>
                        </svg><span data-coreui-i18n="lockAccount">Lock Account</span></a><a class="dropdown-item" href="#">
                        <svg class="icon me-2">
                        <use xlink:href="vendors/@coreui/icons/svg/free.svg#cil-account-logout"></use>
                        </svg><span data-coreui-i18n="logout">Logout</span></a>
                    </div>
                </li>
            </ul>
            <button id="options-btn" class="header-toggler" type="button" style="margin-inline-end: -12px">
            <svg class="icon icon-lg">
                <use xlink:href="vendors/@coreui/icons/svg/free.svg#cil-applications-settings"></use>
            </svg>
            </button>
        </div>
        <! -- <div class="container-fluid px-4">
            <nav aria-label="breadcrumb">
            <ol class="breadcrumb my-0">
                <li class="breadcrumb-item"><a href="#" data-coreui-i18n="home">Home</a>
                </li>
                <li class="breadcrumb-item active"><span data-coreui-i18n="dashboard">Dashboard</span>
                </li>
            </ol>
            </nav>
        </div> -->
    </header>

    <div class="action-buttons">
  
        <button
          onclick='chart.removeNode("101")'
          class="btn btn-action-button waves-effect waves-light"
        >
          <i class="fas fa-user-times"></i> remove</button
        ><br />
  
        <button
          onclick="chart.fit()"
          class="btn btn-action-button waves-effect waves-light"
        >
          <i class="fas fa-sync"></i> fit
        </button>
        <br />
  
        <button
          onclick='chart.layout(["right","bottom","left","top"][index++%4]).render().fit()'
          class="btn btn-action-button waves-effect waves-light"
        >
          <i class="fas fa-retweet"></i> swap
        </button>
        <br />
  
        <button
          onclick="chart.compact(!!(compact++%2)).render().fit()"
          class="btn btn-action-button waves-effect waves-light"
        >
          <i class="fas fa-sitemap"></i> compact
        </button>
        <br />
  
        <button
          onclick="chart.setActiveNodeCentered(!!(actNdCent++%2)).render()"
          class="btn btn-action-button waves-effect waves-light"
        >
          <i class="fas fa-border-none"></i> center Active
        </button>
        <br />
  
        <button
          onclick='chart.setCentered("O-6162").render()'
          class="btn btn-action-button waves-effect waves-light"
        >
          <i class="fas fa-compress-arrows-alt"></i> center
        </button>
        <br />
        <button
          onclick='chart.setHighlighted("O-6162").render()'
          class="btn btn-action-button waves-effect waves-light"
        >
          <i class="fas fa-highlighter"></i> mark</button
        ><br />
        <button
          onclick='chart.setUpToTheRootHighlighted("O-6162").render().fit()'
          class="btn btn-action-button waves-effect waves-light"
        >
          <i class="fas fa-route"></i> mark root
        </button>
        <br />
        <button
          onclick="chart.clearHighlighting()"
          class="btn btn-action-button waves-effect waves-light"
        >
          <i class="fas fa-eraser"></i> clear mark
        </button>
        <br />
        <button
          onclick="chart.fullscreen('body')"
          class="btn btn-action-button waves-effect waves-light"
        >
          <i class="fas fa-expand"></i> fullscreen</button
        ><br />
  
        <button
          onclick="chart.exportImg()"
          class="btn btn-action-button waves-effect waves-light"
        >
          <i class="far fa-images"></i> export img
        </button>
        <br />
  
        <button
          onclick="chart.exportImg({full:true})"
          class="btn btn-action-button waves-effect waves-light"
        >
          <i class="far fa-images"></i> export full img
        </button>
        <br />
  
        <button
          onclick="chart.exportSvg()"
          class="btn btn-action-button waves-effect waves-light"
        >
          <i class="fas fa-file-download"></i> export svg
        </button>
        <br />
        <button
          onclick="chart.expandAll()"
          class="btn btn-action-button waves-effect waves-light"
        >
          <i class="fas fa-angle-double-down"></i> expand all</button
        ><br />
  
        <button
          onclick="chart.collapseAll()"
          class="btn btn-action-button waves-effect waves-light"
        >
          <i class="fas fa-angle-double-up"></i> collapse all</button
        ><br />
  
        <button
          onclick="downloadPdf()"
          class="btn btn-action-button waves-effect waves-light"
        >
          <i class="far fa-file-pdf"></i> export pdf
        </button>
        <br />
  
        <button
          onclick='chart.connections([{from:"O-6069",to:"O-6070",label:"Conflicts of interest"}]).render()'
          class="btn btn-action-button waves-effect waves-light"
        >
          <i class="fas fa-project-diagram"></i> add link
        </button>
        <br />
  
        <button
          onclick="chart.zoomOut()"
          class="btn btn-action-button waves-effect waves-light"
        >
          <i class="fas fa-minus"></i> zoom out</button
        ><br />
        <button
          onclick="chart.zoomIn()"
          class="btn btn-action-button waves-effect waves-light"
        >
          <i class="fas fa-plus"></i> zoom in
        </button>
        <br />
    </div>

    <! -- <div class="chart-holder">
        <button id="enableDragButton" onclick="enableDrag()" style="position:absolute;">Organize</button>
        <div id="dragActions" class="hide">
        <button id="finishDrag" onclick="disableDrag()">Done</button>
        <button id="undoButton" disabled onclick="undo()">Undo</button>
        <button id="redoButton" disabled onclick="redo()">Redo</button>
        <button id="cancelDrag" onclick="cancelDrag()">Cancel</button>
    </div> -->

    <!--
    End of adding node functionality
    -->
    <div class="chart-container" style="height:100%; background-color:white;"></div>
    
    
</div>



<! -- <div class="container-fluid" style="display:flex;">

    <div class="filters-section">
        <h4>Methods</h4>
        <form>
            <div class="form-group">
                <input type="text" class="form-control" id="search" placeholder="Search">
            </div>
        </form>
        <div id="accordion">
            <div class="accordion-item">
                <div class="title_tab">
                    <i class="fa fa-chevron-right dropdown-icon"></i> <!-- Arrow icon here -->
                    <span class="title">Scripts</span>
                </div>
                <div class="inner_content">
                    <div class="list-group elements-list" id="scripts-list">
                        <a href="#" class="list-group-item list-group-item-action"  >
                            <i class="icon fa fa-envelope"></i> <!-- Add icon here -->
                            Email
                        </a>
                        <a href="#" class="list-group-item list-group-item-action">
                            <i class="icon fa fa-phone"></i> <!-- Add icon here -->
                            Phone Number
                        </a>
                        <a href="#" class="list-group-item list-group-item-action">
                            <i class="icon fa fa-file-alt"></i> <!-- Add icon here -->
                            Text
                        </a>
                    </div>
                </div>
            </div>
            <div class="accordion-item">
                <div class="title_tab">
                    <i class="fa fa-chevron-right dropdown-icon"></i> <!-- Arrow icon here -->
                    <span class="title">Processors</span>
                </div>
                <div class="inner_content">
                    <div class="list-group elements-list" id="processors-list">
                        <a href="#" class="list-group-item list-group-item-action">
                            <i class="icon fa fa-calculator"></i> <!-- Add icon here -->
                            Mathematics
                        </a>
                    </div>
                </div>
            </div>
            <div class="accordion-item">
                <div class="title_tab">
                    <i class="fa fa-chevron-right dropdown-icon"></i> <!-- Arrow icon here -->
                    <span class="title">Difficulty Level</span>
                </div>
                <div class="inner_content">
                    <div class="list-group elements-list" id="difficulty-list">
                        <a href="#" class="list-group-item list-group-item-action">
                            <i class="icon fa fa-thumbs-up"></i> <!-- Add icon here -->
                            Easy
                        </a>
                        <a href="#" class="list-group-item list-group-item-action">
                            <i class="icon fa fa-adjust"></i> <!-- Add icon here -->
                            Medium
                        </a>
                        <a href="#" class="list-group-item list-group-item-action">
                            <i class="icon fa fa-exclamation-triangle"></i> <!-- Add icon here -->
                            Hard
                        </a>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="chart-holder">
        <button id="enableDragButton" onclick="enableDrag()">Organize</button>
        <div id="dragActions" class="hide">
        <button id="finishDrag" onclick="disableDrag()">Done</button>
        <button id="undoButton" disabled onclick="undo()">Undo</button>
        <button id="redoButton" disabled onclick="redo()">Redo</button>
        <button id="cancelDrag" onclick="cancelDrag()">Cancel</button>
        </div>

        <!--
        End of adding node functionality
        -->
        <div class="chart-container"></div>
    </div>

</div> -->



<script>
    var index = 0;
    var compact = 0;
    var actNdCent = 0;
</script>

<script>
    // Accordion functionality

    var $titleTab = $('.title_tab');
    $('.accordion-item:eq(0)').find('.title_tab').addClass('active').next().stop().slideDown(300).prev().find('.dropdown-icon').removeClass('fa-chevron-right').addClass('fa-chevron-down');

    $titleTab.on('click', function(e) {
        e.preventDefault();
        if ($(this).hasClass('active')) {
            $(this).removeClass('active');
            $(this).next().stop().slideUp(500);
            $(this).find('.dropdown-icon').removeClass('fa-chevron-down').addClass('fa-chevron-right');
        } else {
            $(this).addClass('active');
            $(this).next().stop().slideDown(500);
            $(this).find('.dropdown-icon').removeClass('fa-chevron-right').addClass('fa-chevron-down');
            $(this).parent().siblings().children('.title_tab').removeClass('active');
            $(this).parent().siblings().children('.inner_content').slideUp(500);
            $(this).parent().siblings().children('.title_tab').find('.dropdown-icon').removeClass('fa-chevron-down').addClass('fa-chevron-right');
        }
    });

</script>
<!-- CoreUI and necessary plugins-->
<script src="vendors/@coreui/coreui-pro/js/coreui.bundle.min.js"></script>
<script src="vendors/simplebar/js/simplebar.min.js"></script>
<script src="vendors/i18next/js/i18next.min.js"></script>
<script src="vendors/i18next-http-backend/js/i18nextHttpBackend.js"></script>
<script src="vendors/i18next-browser-languagedetector/js/i18nextBrowserLanguageDetector.js"></script>
<script src="js/i18next.js"></script>
<script>
  const header = document.querySelector('header.header');

  document.addEventListener('scroll', () => {
    if (header) {
      header.classList.toggle('shadow-sm', document.documentElement.scrollTop > 0);
    }
  });
</script>
<script>
    document.getElementById('options-btn').addEventListener('click', function() {
        var actionButtons = document.querySelector('.action-buttons');
        if (actionButtons.classList.contains('open')) {
          actionButtons.classList.remove('open');
        } else {
          actionButtons.classList.add('open');
        }
        
        // Keep the existing sidebar toggle behavior
        // coreui.Sidebar.getInstance(document.querySelector('#sidebar')).toggle();
      });
      
</script>
